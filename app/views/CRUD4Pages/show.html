#{extends 'main.html' /}
#{set 'moreStyles'}
<link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/crud.css" />
#{/set}
#{set 'moreScripts'}
<script src="@{'/public/javascripts/aloha-global.js'}" type="text/javascript" charset="utf-8"></script>
<script src="@{'/public/javascripts/get-textarea.js'}" type="text/javascript" charset="utf-8"></script>
#{/set}

<div id="crudShow" class="${type.name}">

    <h2 id="crudShowTitle">&{'crud.show.title', type.modelName}</h2>

    <div class="objectForm">
	#{form action:@save(object.id), enctype:'multipart/form-data'}
		#{crud.form}
        #{crud.custom 'tags'}
        
        #{field 'object.tags'}
        <p>
            <label>&{field.name}</label>

            #{list items:models.Tag.findAll(), as:'tag'}
                <input id="object_tags" name="${field.name}.id" type="checkbox" value="${tag.id}" #{if field.value.contains(tag)}checked="checked"#{/if}/>${tag.name}
            #{/list}
            <span class="error">${field.error}</span>
        </p>
        #{/field}
        #{/crud.custom}


        #{/crud.form}

        <p class="crud">
            <input type="text" name="extraTags" id="extraTags" value="" />
        </p>
        <p class="crudButtons">
            <input type="submit" name="_save" value="&{'crud.save', type.modelName}" />
            <input type="submit" name="_saveAndContinue" value="&{'crud.saveAndContinue', type.modelName}" />
        </p>
	#{/form}
    </div>

	#{form @delete(object.id)}
    <p class="crudDelete">
        <input type="submit" value="&{'crud.delete', type.modelName}" />
    </p>
	#{/form}

</div>